import{r as o,j as e,R as b,u as P,A as y,a as g,_ as Q}from"./index-d344998d.js";const T=()=>{const[a,c]=o.useState(1500);o.useEffect(()=>{const l=setInterval(()=>{a>0&&c(t=>t-1)},1e3);return()=>clearInterval(l)},[a]);const r=()=>{const l=Math.floor(a/60).toString().padStart(2,"0"),t=(a%60).toString().padStart(2,"0");return`${l}:${t}`};return e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-3xl font-semibold",children:"Time"}),e.jsx("h5",{className:`text-xl font-semibold ${a<60?"text-red-600 animate-pulse":""}`,children:r()})]})};function _({number:a,handleQuestionNo:c}){const[r,l]=o.useState(!1);console.log("Question No.");const t=()=>{l(!0),c(a)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:`border border-stone-600 py-2 rounded-lg  hover:text-white cursor-pointer transition-all ${r?"bg-sky-600 text-white border-none hover:bg-sky-700":"hover:bg-stone-600"} active:bg-sky-600`,onClick:t,children:e.jsx("span",{className:"font-semibold text-sm text-center block",children:a+1})})})}const j=b.createContext();function D({closeModal:a}){const c=P(),{setReport:r}=o.useContext(y),{paper:l}=o.useContext(j),t=async()=>{await fetch("http://localhost:3300/exam/eval",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(i=>i.json()).then(i=>{r(i.report),c("/result/progressboard")}).catch(i=>console.log(i))};return g.createPortal(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 w-[35%] shadow-md rounded-md bg-white fixed left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] space-y-3 z-50",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Are you sure ?"}),e.jsx("p",{className:"text-sm",children:"Do really want to submit the paper? Once you submit the paper you will never be able to make any change or correction, make sure your review all your questions and answers then submit."}),e.jsxs("div",{className:"flex justify-evenly",children:[e.jsx("button",{className:"text-white bg-green-600 px-4 py-1 rounded-md",onClick:t,children:"Yes"}),e.jsx("button",{className:"text-white bg-red-600 px-4 py-1 rounded-md",onClick:a,children:"No"})]})]}),e.jsx("div",{className:"fixed left-0 right-0 top-0 bottom-0 bg-black opacity-[0.6] z-40"})]}),document.getElementById("portal"))}function O({closeModal:a}){return g.createPortal(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 w-[35%] shadow-md rounded-md bg-white fixed left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] space-y-3 z-50",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Violetion Detected !!!"}),e.jsx("p",{className:"text-sm",children:"It seems that you are trying to do some malpractices. We are not able to detect your face properly. Please sit in light area and face in front your web camera."}),e.jsx("div",{className:"flex justify-evenly",children:e.jsx("button",{className:"text-white bg-red-600 px-4 py-1 rounded-md",onClick:a,children:"OK"})})]}),e.jsx("div",{className:"fixed left-0 right-0 top-0 bottom-0 bg-black opacity-[0.6] z-40"})]}),document.getElementById("portal"))}const I=b.lazy(()=>Q(()=>import("./Question-bf21898b.js"),["assets/Question-bf21898b.js","assets/index-d344998d.js","assets/index-42b52c49.css"]));function M(){const[a,c]=o.useState(!1),[r,l]=o.useState(0),[t,i]=o.useState(null),{email:v,user:N,option:w}=o.useContext(y),[x,h]=o.useState(!1);let p=!0,f=!1;o.useEffect(()=>(console.log("Created"),()=>{f&&(fetch("http://127.0.0.1:5000/release").then(s=>s.text()).catch(s=>console.log(s)),i(null),console.log("Destroyed")),f=!0}),[]),o.useEffect(()=>{fetch("http://127.0.0.1:5000/check",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(s=>s.json()).then(s=>{console.log(s),s.msg==="VIOLENCE"&&h(!0)})},[x]),o.useEffect(()=>{const s=n=>{n.preventDefault()};document.addEventListener("contextmenu",s),document.addEventListener=n=>{n.key==123&&n.preventDefault(),n.ctrlKey&&n.shiftKey&&n.key=="I"&&n.preventDefault(),n.ctrlKey&&n.shiftKey&&n.key=="C"&&n.preventDefault(),n.ctrlKey&&n.shiftKey&&n.key=="J"&&n.preventDefault(),n.ctrlKey&&n.key=="U"&&n.preventDefault()};async function d(){p&&(p=!1,(await fetch("http://localhost:3300/exam/qes",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).json().then(m=>i(m)).catch(m=>console.error(m)))}return d(),()=>{document.removeEventListener("contextmenu",s)}},[]);const u=o.useCallback(Array.from({length:t==null?void 0:t.totalQuestions},(s,d)=>d),[t]),k=s=>{l(s)},C=o.useCallback(()=>{r<(t==null?void 0:t.totalQuestions)-1&&l(s=>s+1)},[r,t]),S=o.useCallback(()=>{r>0&&l(s=>s-1)},[r]),E=o.useMemo(()=>u==null?void 0:u.map((s,d)=>e.jsx(_,{number:s,handleQuestionNo:k},d)),[t]);return e.jsxs(j.Provider,{value:{currentQuestion:r,setCurrentQuestion:l,paper:t,setPaper:i},children:[e.jsxs("div",{className:"w-full pt-20  flex select-none",children:[e.jsxs("div",{className:"w-[20%] bg-slate-100 pt-8",children:[e.jsx("div",{className:"w-[60%] h-28  mx-auto rounded-md text-center text-white"}),e.jsx("div",{className:"w-[80%] h-[65%] mx-auto my-auto border-2 border-stone-500 rounded-md mt-4 p-3 grid grid-cols-4 grid-rows-6 gap-2 ",children:E})]}),e.jsxs("div",{className:"w-[60%] pt-12 relative",children:[e.jsx(o.Suspense,{fallback:e.jsx("h3",{className:"text-xl text-center fixe left-[50%] top-[50%] translate-x-[-50%] translate-y-[50%]",children:"Loading questions..."}),children:t&&e.jsx(I,{})}),e.jsxs("div",{className:"flex px-10 justify-between border-t-2 absolute bottom-0 w-full",children:[e.jsx("button",{className:"py-1 px-3 my-3 bg-pink-500 text-white rounded-lg hover:bg-pink-600",onClick:S,children:"Previous"}),e.jsx("button",{className:"py-1 px-3 my-3 bg-pink-500 text-white rounded-lg hover:bg-pink-600",children:"Marked"}),e.jsx("button",{className:"py-1 px-3 my-3 bg-pink-500 text-white rounded-lg hover:bg-pink-600",onClick:C,children:"Next"})]})]}),e.jsxs("div",{className:"w-[20%] bg-slate-100 pt-12",children:[e.jsx("div",{className:"text-center",children:e.jsx(T,{})}),e.jsxs("div",{className:"flex items-center flex-col mt-10",children:[e.jsx("img",{className:"rounded-full w-20 border-2 border-pink-600",src:"/profile.jpg",alt:""}),e.jsx("h4",{className:"text-lg font-semibold mt-2",children:N}),e.jsx("p",{className:"text-xs",children:v})]}),e.jsx("div",{className:"flex justify-center mt-36",children:e.jsx("button",{className:"px-4 py-1 rounded-md bg-green-600 text-white font-semibold active:bg-green-700",onClick:()=>c(!0),children:"Submit"})})]})]}),t&&a&&e.jsx(D,{closeModal:()=>c(!1)}),t&&x&&e.jsx(O,{closeModal:()=>h(!1)})]})}const L=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{L as E,j as Q};
